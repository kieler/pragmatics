<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Klay Layout Test</title>
    <script type="text/javascript" language="javascript" src="klaygwt/klaygwt.nocache.js"></script>
  </head>
                                      
  <body>

    <h1>Klay Layout Test</h1>

  </body>
  
  <script>
	   function klayinit() {
		    
		    var graph = {
				"id": "root",
				properties: {
					"direction": "DOWN",
					"spacing": 40,
					"de.cau.cs.kieler.nodeLabelPlacement": "[INSIDE, V_TOP, H_LEFT]"
				},
				"children": [
				{
					"id": "n1",
					"width": 40,
					"height": 40
				}, {
					"id": "n2",
					"width": 40,
					"height": 40
				}, {
					"id": "n3",
					"width": 40,
					"height": 40
				}],
				"edges": [
				{
					"id": "e1",
					"source": "n1",
					"target": "n2"
				},
				{
					"id": "e2",
					"source": "n1",
					"target": "n3"
				},
				{
					"id": "e3",
					"source": "n2",
					"target": "n3"
				}
				]
			};
			
			var graph2 = {
			    id: "root", 
			    properties: {
			    	spacing: 100,
			    	edgeRouting: "ORTHOGONAL",
			    	separateConnComp: false
			    },
			    children: [{
			        id: "n1", 
			        labels: [ { text: "n1" } ],
			        width: 100,
			        height: 100
			    },{
			        id: "n2",
			        labels: [ { text: "n2" } ],
			        width: 100,
			        height: 50,
			        properties: {
				    	spacing: 100,
				    	edgeRouting: "ORTHOGONAL",
				    	separateConnComp: false
			        },
			        ports: [{
			            id: "n2_p1",
			            width: 10,
			            height: 10
			        }],
			        children: [{ 
			            id: "n3", 
			            labels: [ { text: "n3" } ],
			            width: 40,
			            height: 40
			        },{
			            id: "n4",
			            labels: [ { text: "n4" } ],
			            width: 40,
			            height: 40}
			        ],
			        edges: [{
			            id: "e4", 
			            source: "n3",
			            target: "n4"
			        }]
			    }],
			    edges: [{
			        id: "e1", 
			        labels: [ { text: "e1" } ],
			        source: "n1",
			        target: "n2",
			        targetPort: "n2_p1"
			    }]
			};
		    
			$klay.layout({
				graph: graph2,
				success: function(layouted) {
					console.log(layouted);
					document.body.innerHTML = "<pre>" + JSON.stringify(layouted, null, "  ") + "</pre>"; 
				},
				error: function(error) { 
					console.log(error); 
					document.body.innerHTML = "<pre>" + JSON.stringify(error, null, "  ") + "</pre>";
				}
			});
	   }
	</script>
	
</html>
