apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    testCompile "junit:junit:[4,)"

    // According to classpath in build.xml, to be adjusted when fully migrating to gradle
    testCompile files("${rootProject.projectDir}/war/WEB-INF/classes")
    testCompile files("${rootProject.gwt_sdk}/gwt-user.jar")
    testCompile fileTree(dir: "${rootProject.gwt_sdk}", include: 'gwt-dev*.jar')
    testCompile fileTree(dir: "${rootProject.projectDir}/war/WEB-INF/lib", include: '**/*.jar')
}

sourceSets {
    test {
        java {
            srcDirs = ['src']
        }
    }
}

test {
    useJUnit()
    reports.html.enabled = false
    reports.junitXml.destination = "${rootProject.buildDir}/test-reports/"
}
test.dependsOn rootProject.tasks['copySrc'], rootProject.tasks['javac']
