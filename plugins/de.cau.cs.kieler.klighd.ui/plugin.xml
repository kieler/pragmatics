<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="de.cau.cs.kieler.klighd.extensions">
      <viewer
            class="de.cau.cs.kieler.klighd.ui.internal.viewers.PiccoloViewerProvider"
            id="de.cau.cs.kieler.klighd.piccolo.piccoloViewer">
      </viewer>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="de.cau.cs.kieler.klighd.ui.nodesSelected">
         <iterate>
            <instanceof
                  value="de.cau.cs.kieler.core.kgraph.KNode">
            </instanceof>
         </iterate>
      </definition>
      <definition
            id="de.cau.cs.kieler.klighd.ui.clipActionVisibility">
         <and>
            <count
                  value="1">
            </count>
            <reference
                  definitionId="de.cau.cs.kieler.klighd.ui.nodesSelected">
            </reference>
         </and>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="de.cau.cs.kieler.klighd.ui.context"
            name="Browsing KIELER Lightweight Diagrams"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="de.cau.cs.kieler.klighd"
            name="KIELER Light-weight Diagrams">
      </category>
      <view
            allowMultiple="true"
            category="de.cau.cs.kieler.klighd"
            class="de.cau.cs.kieler.klighd.ui.parts.DiagramViewPart"
            icon="icons/klighd.gif"
            id="de.cau.cs.kieler.klighd.ui.lightDiagramView"
            name="Light-weight Diagram"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="de.cau.cs.kieler.klighd.ui.parts.DiagramEditorPart"
            default="false"
            icon="icons/klighd.gif"
            id="de.cau.cs.kieler.klighd.ui.lightDiagramEditor"
            name="Light-weight Diagram">
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="de.cau.cs.kieler.klighd.ui.internal.KlighdPreferencePage"
            id="de.cau.cs.kieler.klighd.ui.preferences"
            name="KIELER Light-Weight Diagrams">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="de.cau.cs.kieler.klighd.ui"
            name="KLighD Commands">
      </category>
      <commandParameterType
            converter="de.cau.cs.kieler.klighd.ui.internal.handlers.KlighdActionExecutionHandler$IActionParameterValueConverter"
            id="de.cau.cs.kieler.klighd.ui.IAction"
            type="de.cau.cs.kieler.klighd.IAction">
      </commandParameterType>
      <command
            categoryId="de.cau.cs.kieler.klighd.ui"
            description="Generic KLighD command allowing to execution IAction implementations"
            id="de.cau.cs.kieler.klighd.ui.actionExecution"
            name="IAction execution">
         <commandParameter
               id="de.cau.cs.kieler.klighd.ui.action"
               name="Action"
               optional="false"
               typeId="de.cau.cs.kieler.klighd.ui.IAction"
               values="de.cau.cs.kieler.klighd.ui.internal.handlers.KlighdActionExecutionHandler$IActionParameterValues">
         </commandParameter>
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="de.cau.cs.kieler.klighd.ui.internal.handlers.KlighdActionExecutionHandler"
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution">
         <enabledWhen>
            <iterate>
               <instanceof
                     value="de.cau.cs.kieler.core.kgraph.KGraphElement">
               </instanceof>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="de.cau.cs.kieler.klighd.ui.internal.handlers.KlighdLayoutHandler"
            commandId="de.cau.cs.kieler.kiml.ui.command.layout">
         <activeWhen>
            <with
                  variable="activeEditor">
               <instanceof
                     value="de.cau.cs.kieler.klighd.IDiagramWorkbenchPart$IDiagramEditorPart">
               </instanceof>
            </with>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?before=additions">
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Clip selected"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ClipSelectionAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.clipActionVisibility">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Clip towards selection"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ClipTowardsSelectionAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.clipActionVisibility">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Clip parent"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ClipParentAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.clipActionVisibility">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Clip root"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ClipResetAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.clipActionVisibility">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Scale up"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ScaleUpAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.nodesSelected">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Scale down"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ScaleDownAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.nodesSelected">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="Scale 100%"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.ScaleResetAction">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.klighd.ui.nodesSelected">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1++">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ScaleUpAction">
         </parameter>
      </key>
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+-">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ScaleDownAction">
         </parameter>
      </key>
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+0">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ScaleResetAction">
         </parameter>
      </key>
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+ARROW_DOWN">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ClipSelectionAction">
         </parameter>
      </key>
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+ARROW_DOWN">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ClipTowardsSelectionAction">
         </parameter>
      </key>
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+ARROW_UP">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ClipParentAction">
         </parameter>
      </key>
      <key
            commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
            contextId="de.cau.cs.kieler.klighd.ui.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+ARROW_UP">
         <parameter
               id="de.cau.cs.kieler.klighd.ui.action"
               value="de.cau.cs.kieler.klighd.actions.ClipResetAction">
         </parameter>
      </key>
   </extension>
   <!-- extension
         id="de.cau.cs.kieler.klighd.ui.internal.commands.TestHandler"
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:de.cau.cs.kieler.layout.toolbar">
         <command
               commandId="de.cau.cs.kieler.klighd.ui.actionExecution"
               label="TestContribution"
               style="push">
            <parameter
                  name="de.cau.cs.kieler.klighd.ui.action"
                  value="de.cau.cs.kieler.klighd.actions.CollapseExpandAction">
            </parameter>
         </command>
      </menuContribution>
   </extension -->

</plugin>
